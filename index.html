<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Catalogue and Sales Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="stylesheet" href="style.css" />

  <script defer src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script defer src="https://cdn.plot.ly/plotly-2.32.0.min.js"></script>
  <script defer src="app.js"></script>
</head>

<body>
  <header class="topbar">
    <div class="topbar-inner">
      <div class="title">
        <h1>Catalogue and Sales Dashboard</h1>
        <p>Auto loads MakitaExport.csv</p>
      </div>

      <div class="controls">
        <label class="file">
          <input id="file" type="file" accept=".csv" />
          <span>Load different CSV</span>
        </label>

        <input id="skuSearch" type="search" placeholder="Search SKU, Product Name, Product ID" />

        <select id="brandFilter">
          <option value="">Brand (All)</option>
        </select>

        <select id="parentCatFilter">
          <option value="">Parent Category (All)</option>
        </select>

        <select id="subCat1Filter">
          <option value="">Sub Category 1 (All)</option>
        </select>

        <select id="bestsellerFilter">
          <option value="">Best Seller Status (All)</option>
        </select>

        <select id="qualityFilter">
          <option value="">Quality focus (All)</option>
          <option value="missingPdp">Missing PDP</option>
          <option value="missingDesc">Not Optimised Description</option>
          <option value="badFilters">Filters Not Correct</option>
          <option value="lowImages">Low Images (0 or 1)</option>
        </select>

        <button id="resetBtn" class="btn" type="button">Reset</button>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="kpis">
      <div class="kpi">
        <div class="kpi-value" id="kpiProducts">–</div>
        <div class="kpi-label">Products</div>
      </div>

      <div class="kpi">
        <div class="kpi-value" id="kpiStockValue">–</div>
        <div class="kpi-label">Stock Value</div>
      </div>

      <div class="kpi">
        <div class="kpi-value" id="kpiUnitsYtd">–</div>
        <div class="kpi-label">Units Sold This Year</div>
      </div>

      <div class="kpi">
        <div class="kpi-value" id="kpiUnitsLy">–</div>
        <div class="kpi-label">Units Sold Last Year</div>
      </div>

      <div class="kpi">
        <div class="kpi-value" id="kpiEstRevYtd">–</div>
        <div class="kpi-label">Estimated Revenue This Year (ex VAT)</div>
      </div>

      <div class="kpi">
        <div class="kpi-value" id="kpiLowStock">–</div>
        <div class="kpi-label">Low Stock (<=2 available)</div>
      </div>
    </section>

    <section class="grid">
      <div class="card">
        <h2>Top Products by Units Sold (This Year)</h2>
        <div class="chart" id="topUnitsBar"></div>
      </div>

      <div class="card">
        <h2>Stock Value by Parent Category</h2>
        <div class="chart" id="stockValueByCat"></div>
      </div>

      <div class="card">
        <h2>Profit % Distribution (Per Unit)</h2>
        <div class="chart" id="profitHist"></div>
      </div>

      <div class="card">
        <h2>Units Sold vs Profit % (Bubble by Stock Value)</h2>
        <div class="chart" id="salesVsProfit"></div>
      </div>
    </section>

    <section class="grid">
      <div class="card">
        <h2>Content Readiness</h2>
        <div class="chart" id="contentReadiness"></div>
      </div>

      <div class="card">
        <h2>Images Count (By Best Seller Status)</h2>
        <div class="chart" id="imagesByStatus"></div>
      </div>

      <div class="card">
        <h2>Availability vs Supplier Stock</h2>
        <div class="chart" id="stockScatter"></div>
      </div>

      <div class="card">
        <h2>Pricing (Selling ex VAT vs Cost ex VAT)</h2>
        <div class="chart" id="priceScatter"></div>
      </div>
    </section>

    <section class="card table-card">
      <div class="table-head">
        <h2>Product Table</h2>
        <div class="table-meta" id="tableMeta">–</div>
      </div>

      <div class="table-wrap">
        <table id="productTable">
          <thead>
            <tr>
              <th>SKU</th>
              <th>Product Name</th>
              <th>Brand</th>
              <th>Parent Category</th>
              <th>Sub Category 1</th>
              <th>Best Seller</th>
              <th>Avail Stock</th>
              <th>Supplier Stock</th>
              <th>Stock Value</th>
              <th>Units YTD</th>
              <th>Units LY</th>
              <th>Cost ex VAT</th>
              <th>Selling ex VAT</th>
              <th>Sale Price</th>
              <th>Profit %</th>
              <th>PDP?</th>
              <th>Optimised Desc?</th>
              <th>Images</th>
              <th>Filters Correct?</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <p class="note">Tip: use Search to focus on a SKU, then the charts update to match.</p>
    </section>
  </main>
</body>
</html>
